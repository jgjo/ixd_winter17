<!DOCTYPE html>
<html lang="en">

<head>
    <% include ../views/partials/head %>

    <!-- Google Maps -->
    <style>
         #map {
           width: 100%;
           height: 550px;
           background-color: grey;
         }
    </style>
</head>

<body>
<div>
    <header>
        <% include ../views/partials/header %>
        <% include ../views/partials/hamburger %>
    </header>

    <div id="wrapper">

       <!-- Google map -->
       <div id="google_map">
            <div id="map"></div>
       </div>

        <!-- Add activity and filter buttons overlayed on map -->
        <div id="over_map" width="100%" height="500px">
          <div class="row">
            <div class="col-lg-12 text-center" style="margin: 5px 5px;">
              <a class="btn btn-lg btn-light" style="color: darkcyan;" onclick='addclick()'><i class="fa fa-plus" aria-hidden="true"></i></a>
            </div>
            <div class="col-lg-12 text-center" style="margin: 5px 5px;">
              <a class="btn btn-lg btn-light" style="color: darkcyan;" onclick='filterclick()'><i class="fa fa-filter" aria-hidden="true"></i></a>
            </div>
          </div>
        </div>


        <!--     <div id="activityDiv" style="text-align: center, color: grey">
            <p>PAINT WITH WINE!</p><br>
            <p>Ann Paul</p>
            <button onclick="activityclick()">View Activity</button>
        </div> -->

    </div>
</div>

    <!-- jQuery -->
    <script src="javascripts/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="javascripts/bootstrap.min.js"></script>

    <!-- Custom css -->
    <script src="javascripts/index.js"></script>

    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDdV_CqEBtoB4xae7DEXjtsHSCTZOZI9m0&callback=initMap">
    </script>

    <script>

        var map;
        var activities =<%-JSON.stringify(activitiesJSON)%>

        function initMap() {
          var center = {lat: 32.715738, lng: -117.161084};
          map = new google.maps.Map(document.getElementById('map'), {
            zoom: 13,
            center: center
          });

          addMarkers();
        }

        function addMarkers()
        {

          var bounds = new google.maps.LatLngBounds();
          var infowindow = new google.maps.InfoWindow();

          for(var i=0; i<activities.activities.length; i++) {
              var latLng = new google.maps.LatLng(activities.activities[i].location.lat,activities.activities[i].location.lng);
              var marker = new google.maps.Marker({
                              position: latLng,
                              map: map
                           });

              bounds.extend(marker.position);

              google.maps.event.addListener(marker, 'click', (function(marker, i) {
                return function() {
                  infowindow.setContent('Description');
                  infowindow.open(map, marker);
                }
              })(marker, i));
          }

          // marker.addListener('click', function() {
          //     window.alert("ACTIVITY!");
          // });
        }

    </script>

</body>

</html>
