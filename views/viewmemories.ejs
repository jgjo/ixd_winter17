<!DOCTYPE html>
<html lang="en">

<head>
    <% include ../views/partials/head %>
</head>
<body>
    <header>
        <% include ../views/partials/header%>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    </header>

    <div style="text-align: center">
	    <!--p>VIEW MEMORIES (PREVIOUS ACTIVITIES)</p-->

      <section>
        <ul class="nav nav-tabs">
          <li class="btn-block active" style="width: 50%"><a data-toggle="tab" href="#sectionA"><h3>Ongoing</h3></a></li>
          <li class="btn-block" style="width: 50%"><a data-toggle="tab" href="#sectionB"><h3>Past</h3></a></li>
        </ul>
        <div class="tab-content">
          <div id="sectionA" class="tab-pane fade in active">
            <section id="services" class="services bg-primary">
              <div class="container">
                <div class="row text-center">
                  <div class="col-lg-10 col-lg-offset-1">
                    <hr class="small">
                    <div id="ongoing" class="row">
                    </div>
                    <!-- /.row (nested) -->
                  </div>
                  <!-- /.col-lg-10 -->
                </div>
                <!-- /.row -->
              </div>
              <!-- /.container -->
            </section>
          </div>
          <div id="sectionB" class="tab-pane fade">
            <section id="services" class="services bg-primary">
              <div class="container">
                <div class="row text-center">
                  <div class="col-lg-10 col-lg-offset-1">
                    <hr class="small">
                    <div id="past" class="row">                      
                    </div>
                    <!-- /.row (nested) -->
                  </div>
                  <!-- /.col-lg-10 -->
                </div>
                <!-- /.row -->
              </div>
              <!-- /.container -->
            </section>
          </div>
        </div>
      </section>
	</div>

    <script>

        var activitylog =<%-JSON.stringify(activitylogJSON)%> 
        activitylog = activitylog.activitylog;
        var activities =<%-JSON.stringify(activitiesJSON)%>
        activities=activities.activities;

        for(var i=0; i<activitylog.length; i++) {
          if(activitylog[i].past)
          {
            //past
            var parent = document.getElementById("past");
            var href = "/viewmemory?id="+activitylog[i].activityid;
            var btnText = "View";

          }
          else
          {
            //ongoing
            var parent = document.getElementById("ongoing");
            var href = "/logexperience?id="+activitylog[i].activityid;
            var btnText = "Continue logging";
          }
          console.log(activitylog[i]);
          for(var j=0; j<activities.length; j++) {
            if(activities[j].id == activitylog[i].activityid)
            {
              var newdiv = document.createElement("div");
              newdiv.className = "col-md-6 col-sm-12";
              newdiv.innerHTML = '<hr> <div class="service-item"> <img height="100" width="100" src="'+activities[j].pictures[0].src+'" alt="Picture"> <h4> <strong>' + activities[j].name + '</strong> </h4> <h5>'+activities[j].hostName+'</h5> <p>' + activities[j].description + '</p> <a href="'+href+'" class="btn btn-light">'+btnText+'</a> </div>';
              parent.insertBefore(newdiv, parent.firstChild);
            }
          }
        }

        var goBack = function()
        {
          window.location.href = '/'
        }

    	  var btn1 = function() 
    	  {
    		window.location.href = '/viewactivity'
  		  }
    </script>
  </body>
</html>
